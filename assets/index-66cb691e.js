var v=Object.defineProperty;var X=(s,t,i)=>t in s?v(s,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):s[t]=i;var e=(s,t,i)=>(X(s,typeof t!="symbol"?t+"":t,i),i);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))h(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const d of r.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&h(d)}).observe(document,{childList:!0,subtree:!0});function i(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerpolicy&&(r.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?r.credentials="include":a.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function h(a){if(a.ep)return;a.ep=!0;const r=i(a);fetch(a.href,r)}})();class x{constructor(t){e(this,"x",0);e(this,"speedX",0);e(this,"y",0);e(this,"groundAsset");e(this,"groundY",0);this.groundY=t.groundY,this.groundAsset=t.assets.ground}draw(t){const i=this.groundAsset;i&&t.drawImage(i,this.x,this.groundY-16,i.width,i.height)}update(){this.x-=this.speedX,this.x<-600&&(this.x=0,this.x-=this.speedX)}}class E{constructor(t){e(this,"player");this.player=t.player,window.addEventListener("keydown",i=>{i.preventDefault(),this.jump(i.key)})}jump(t){t&&t===" "&&(this.player.jump=!0)}}class l{constructor(t,i){e(this,"obstacles");e(this,"x",0);e(this,"y",0);e(this,"height",0);e(this,"width",0);e(this,"type","small");this.type=t,this.obstacles=i}draw(t){switch(this.type){case"small":this.width=16,this.height=32,t.drawImage(this.obstacles,this.x,this.y,this.width,this.height);break;case"medium":this.width=16*1.5,this.height=32*1.5,t.drawImage(this.obstacles,this.x,this.y,this.width,this.height);break;case"big":this.width=16*1.8,this.height=32*1.8,t.drawImage(this.obstacles,this.x,this.y,this.width,this.height);break}}update(){}}function F(s){for(let t=s.length-1;t>0;t--){const i=Math.floor(Math.random()*(t+1));[s[t],s[i]]=[s[i],s[t]]}return s}function Y(s,t){return[...s].sort(()=>.5-Math.random()).slice(0,t)}class I{constructor(t){e(this,"x",0);e(this,"y",0);e(this,"speedX",0);e(this,"width",100);e(this,"height",100);e(this,"groundY",0);e(this,"obstaclesAsset");e(this,"elements");e(this,"canvas");this.x=t.canvas.width-100,this.y=t.groundY-this.height,this.groundY=t.groundY,this.obstaclesAsset=t.assets.obstacles,this.canvas=t.canvas,this.elements=[new l("small",t.assets.obstacles),new l("medium",t.assets.obstacles),new l("big",t.assets.obstacles)]}draw(t){for(const[i,h]of this.elements.entries()){h.draw(t),h.x=this.x,h.y=this.groundY-h.height;const a=this.elements[i-1];a&&(h.x=a.x+a.width)}}update(){this.x-=this.speedX;const t=this.elements.reduce((i,h)=>i+=h.width,0);if(this.x<-t){this.x=this.canvas.width+Math.random()*400;const i=[new l("small",this.obstaclesAsset),new l("medium",this.obstaclesAsset),new l("big",this.obstaclesAsset)],h=Math.floor(Math.random()*(3-1+1)+1),a=Y(i,h);this.elements=F(a)}}}class R{constructor(t){e(this,"jump",!1);e(this,"onGround",!0);e(this,"x",200);e(this,"y",0);e(this,"dx",0);e(this,"dy",0);e(this,"height",32);e(this,"width",16);e(this,"limit",100);e(this,"isGrounded",!0);e(this,"jumpPower",.5);e(this,"groundY",0);e(this,"playerImg");e(this,"frameX",0);e(this,"actions",{run:{endFrameX:8,startFrameY:3},jump:{endFrameX:6,startFrameY:1}});this.y=t.groundY-this.height,this.groundY=t.groundY,this.playerImg=t.assets.player}draw(t){t.fillStyle="red";let d=this.actions.run;this.jump?d=this.actions.jump:d=this.actions.run,t.drawImage(this.playerImg,100*this.frameX,91.3*d.startFrameY,100,100,this.x,this.y,32,32)}update(t){let i=7;this.jump&&(i=5),this.frameX>i&&(this.frameX=0),t%6===0&&(this.frameX+=1);const h=.3;this.y+=this.dy,this.y+=h*this.jumpPower,this.dy+=h*this.jumpPower,this.jump&&this.isGrounded&&(this.dy=-10*this.jumpPower),this.y>=this.groundY-this.height?(this.y=this.groundY-this.height,this.isGrounded=!0,this.jump=!1):this.isGrounded=!1}}class z{constructor(t,i){e(this,"rows",130);e(this,"columns",300);e(this,"canvas");e(this,"lastTime",0);e(this,"deltaTime",0);e(this,"blockSize",2);e(this,"player");e(this,"scale",1);e(this,"obstacle");e(this,"groundY",0);e(this,"bg");e(this,"assets");e(this,"speedX",1.4);e(this,"gameFrame",1);this.canvas=t,this.scale=window.devicePixelRatio,this.assets=i,this.canvas.width=600,this.canvas.height=300,this.setGroundY(32),this.player=new R(this),this.obstacle=new I(this),this.bg=new x(this)}setGroundY(t=0){this.groundY=this.canvas.height-t}draw(t){this.bg.draw(t),this.bg.speedX=this.speedX,this.player.draw(t),this.obstacle.draw(t),this.obstacle.speedX=this.speedX}update(){this.player.update(this.gameFrame),this.obstacle.update(),this.bg.update()}}const u=document.getElementById("canvas"),c=u.getContext("2d"),w=2,m=w*225,p=w*800,A=.9;let n=m,o=p;function f(){o=window.innerWidth,n=window.innerHeight;const s=p/m;o/n>s?(n=Math.floor(n*A),o=Math.floor(n*s)):(o=Math.floor(o*A),n=Math.floor(o/s)),c.canvas.style.width=`${o}px`,c.canvas.style.height=`${n}px`}window.addEventListener("resize",()=>{f()});const y=new Image;y.src=new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABwgAAAAQCAQAAACouON1AAAAAXNSR0IArs4c6QAAAvtJREFUeJztnd12qyAQRvX9Hzrn4qwuEwXkb+CD2fuqbRoHh2FbENPz8zmgifPra5IJMa46oUpgHvgKcsBXoAC+ghzwVQ9OJoQt/C/CT/A7gNDljCqBWeArSIOvQAd8BWnwVV8qJ4R/3eA77efxzMDzZ6xweSWuplDlhN5LxfSBbB4HvoI0+EoFsnkc+ArS4Kv+FE4If2/Lep+Ln6/F+FzhmpWtmbE98jY2Uv1xvdf7CGsFX32DryAGvlIAX32DryAGvrKhYEIYTp7fnbvxkvt7JbyaNSNPZ6Q99nGfeKiTnEzHZHR/L9KqA1/9gq9y4j7xUCf4aj746hd8lRP3iYc6wVdWPBZhvvfh3kklLfyOvUmvT4R/Y1aeftfUxse9uLcgfglcmTzB5I6zPXJiAb7KB1/lx73AVxf4qhV8lQ++yo97ga8u8FUptzuEZetR4Vv6viEnZfDYONSDr1ohJ2XgK6gHX7VCTsrAV1CCwKeMjrvtbSkTRFUPj4XrMm4bTDqSzjMa+Mo7+EoXfHUHX3kHX+mi5iuBCaE36tRmP6h7Pa2w0ipUfVbHXaC0L4V+n3HxAr7SAV+1gq92B1/pgK9aGe2rzSaEGutyGq0ADeLPO4xsw5zo2rKdj4YpNFoBGuAriKFhCo1WgAb4qusR8yaEb0NwdELWF/e8M+gXuceR2uWeboVtnrV7Mb2WmF57Wvuii696o13p446Er+wi46v46/iqDO1KH3ckfGUXeUdfVd8hzO2qkV3aN9b70Urj2edipe0Eq9K/LlSxlFY8Rzabd/AVvvIJvupzbHyFr/CVPfiqz7HrfGW8ZbRlP7d9pzO8e6Hdzzuxiww10a5jxksvtPt5J/CVJdp1zHjphXY/74R3XwX+7YRuQvbvLIX90Puye/0onN9Yg+CrueArS3avH4Xzw1cXCv1hC76yZPf6UTg/a4Ns9qEynhh9cVEYDm+s0MbRaP8RUgb9uy746skKbRwNvgIF8NWTFdo4mr18xYQQAAAAAADAKf8Ayo90Apn1S10AAAAASUVORK5CYII=",self.location).href;const g=new Image;g.src=new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAABACAQAAADRh70lAAAAAXNSR0IArs4c6QAAAMhJREFUWIXtlcEOwyAMQ+1q///L3gFYCzQVgQN0IqeqLU9RbBzCLInpCaT1l/nhPP6MMF7nx58Qh9VBa/0B4NNzSAIQh9rRgUQQjBg34BQ4IJyA3B+ENF+FDVgBEO/C1d0dHeTudgNKd/uKZfqF7KszERDqCJUnD+4HNF/GlwMEcgAQBO8GpF3Z7IPSouneeIy0t/OygErGkErt4XjjA1+yzp/BAgCyY5vkHYwhDmAMEX1Alkut1Q0/I+Vx0b4jF5BxAzZgAwAAX6B5NZHsXY3sAAAAAElFTkSuQmCC",self.location).href;const b=new Image;b.src=new URL("/runner/assets/player-19de8207.png",self.location).href;g.addEventListener("load",s=>{s.stopImmediatePropagation});const C=()=>{c.canvas.width=o,c.canvas.height=n,f();const s=new z(u,{ground:y,obstacles:g,player:b});new E(s);const t=(i=0)=>{c.clearRect(0,0,u.width,u.height),s.deltaTime=i-s.lastTime,s.draw(c),s.update(),window.requestAnimationFrame(t),s.lastTime=i,s.gameFrame++,s.gameFrame>100&&(s.gameFrame=1)};t()};window.addEventListener("load",C);
